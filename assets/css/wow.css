/* ═══════════════════════════════════════════════════
   MicroShip — WOW Factor Upgrades
   ═══════════════════════════════════════════════════ */

/* ── Scroll Progress Bar ── */
.scroll-progress{position:fixed;top:0;left:0;height:3px;background:linear-gradient(90deg,var(--gold),var(--gold-light));z-index:10000;width:0;transition:none;pointer-events:none}

/* ── Page Fade-in Transition ── */
.page-fade{animation:pageFadeIn .4s ease both}
@keyframes pageFadeIn{from{opacity:0}to{opacity:1}}
.page-fade-out{opacity:0!important;transition:opacity .2s ease!important}

/* ── Back to Top Button ── */
.back-to-top{position:fixed;bottom:32px;right:32px;width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--navy);border:none;cursor:pointer;font-size:1.4rem;display:flex;align-items:center;justify-content:center;z-index:9998;opacity:0;transform:translateY(20px);transition:all .3s ease;box-shadow:0 4px 16px rgba(212,168,83,.3);pointer-events:none}
.back-to-top.visible{opacity:1;transform:translateY(0);pointer-events:auto}
.back-to-top:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(212,168,83,.5)}

/* ── Dark/Light Mode Toggle ── */
.theme-toggle{background:none;border:2px solid var(--glass-border);border-radius:50%;width:36px;height:36px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:1.1rem;transition:all .3s ease;color:var(--text);margin-left:12px;flex-shrink:0}
.theme-toggle:hover{border-color:var(--gold);color:var(--gold)}

/* Light Mode */
body.light-mode{--navy:#f8f6f2;--navy-light:#eeebe5;--navy-mid:#e0ddd7;--text:#1a2d50;--text-muted:#5a6578;--white:#0a1628;--glass:rgba(0,0,0,.04);--glass-border:rgba(0,0,0,.1)}
body.light-mode{background:#f8f6f2;color:#1a2d50}
body.light-mode .site-header.scrolled{background:rgba(248,246,242,.95)}
body.light-mode .glass-card{background:rgba(255,255,255,.7);box-shadow:0 2px 8px rgba(0,0,0,.06),0 8px 24px rgba(0,0,0,.04)!important}
body.light-mode .hero-bg,.light-mode .mesh-fallback{opacity:.15}
body.light-mode #heroCanvas{opacity:.1}
body.light-mode .mobile-nav{background:rgba(248,246,242,.98)}
body.light-mode .testimonials{background:#eeebe5}
body.light-mode .faq{background:#eeebe5}
body.light-mode .site-footer{background:#eeebe5}
body.light-mode .hamburger span{background:#1a2d50}
body.light-mode .stat-number{-webkit-text-fill-color:var(--gold)!important}
body.light-mode::after{opacity:.015}
body.light-mode .hero h1,body.light-mode .section-title,body.light-mode h1,body.light-mode h2,body.light-mode h3{color:#0a1628}
body.light-mode .hero p{color:#5a6578}
body.light-mode .area-tag{background:rgba(0,0,0,.04);border-color:rgba(0,0,0,.1);color:#1a2d50}
body.light-mode .footer-bottom{color:#5a6578}

/* ── FAQ Smooth Accordion ── */
.faq-item .faq-answer{overflow:hidden;max-height:0;padding:0;transition:max-height .4s ease,padding .3s ease}
.faq-item[open] .faq-answer{max-height:500px;padding:0 0 24px}

/* ── Service Card Gradient Overlay ── */
.service-card::after{content:'';position:absolute;inset:0;border-radius:inherit;background:linear-gradient(135deg,rgba(212,168,83,.03),rgba(26,45,80,.05));opacity:0;transition:opacity .3s ease;pointer-events:none}
.service-card:hover::after{opacity:1}

/* ── Loading Screen (index only) ── */
.site-loader{position:fixed;inset:0;background:var(--navy);z-index:99999;display:flex;flex-direction:column;align-items:center;justify-content:center;transition:opacity .4s ease}
.site-loader img{width:180px;margin-bottom:24px}
.site-loader .loader-bar{width:180px;height:3px;background:rgba(255,255,255,.1);border-radius:2px;overflow:hidden}
.site-loader .loader-bar-fill{height:100%;background:linear-gradient(90deg,var(--gold),var(--gold-light));width:0;animation:loaderFill 1s ease forwards}
@keyframes loaderFill{to{width:100%}}
.site-loader.done{opacity:0;pointer-events:none}

/* ── Parallax Sections ── */
.parallax-stats{background-image:url('../images/full-service.webp')!important;background-attachment:fixed;background-size:cover;background-position:center;position:relative}
.parallax-stats::before{content:'';position:absolute;inset:0;background:rgba(10,18,36,.85)}
.parallax-stats>.container{position:relative;z-index:1}
.parallax-stats .stats-grid{position:relative;z-index:1}

.parallax-cta{background-image:url('../images/stress-free.webp')!important;background-attachment:fixed;background-size:cover;background-position:center;position:relative}
.parallax-cta::before{content:'';position:absolute;inset:0;background:rgba(10,18,36,.85)}
.parallax-cta>.container{position:relative;z-index:1}

@media(max-width:768px){
  .parallax-stats,.parallax-cta{background-attachment:scroll!important}
  .back-to-top{bottom:24px;right:24px;width:42px;height:42px}
}

/* ── Before/After Slider ── */
.before-after-section{padding:120px 0}
.ba-slider{position:relative;width:100%;max-width:900px;margin:0 auto;aspect-ratio:16/9;overflow:hidden;border-radius:var(--radius-lg);border:1px solid var(--glass-border);cursor:col-resize;user-select:none;-webkit-user-select:none}
.ba-side{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px}
.ba-before{background:linear-gradient(135deg,#1a1a2e,#16213e);clip-path:inset(0 50% 0 0);z-index:1}
.ba-after{background:linear-gradient(135deg,var(--navy),var(--navy-light));z-index:0}
.ba-side h3{font-size:1.5rem;margin-bottom:12px}
.ba-side .ba-tag{display:inline-block;padding:6px 16px;border-radius:50px;font-size:.75rem;font-weight:700;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px}
.ba-before .ba-tag{background:rgba(255,80,80,.2);color:#ff6b6b;border:1px solid rgba(255,80,80,.3)}
.ba-after .ba-tag{background:rgba(212,168,83,.2);color:var(--gold);border:1px solid rgba(212,168,83,.3)}
.ba-side ul{list-style:none;text-align:left;max-width:300px}
.ba-side ul li{padding:6px 0;font-size:.9rem;color:var(--text-muted)}
.ba-side ul li::before{margin-right:8px}
.ba-before ul li::before{content:'✗';color:#ff6b6b}
.ba-after ul li::before{content:'✓';color:var(--gold)}
.ba-divider{position:absolute;top:0;bottom:0;left:50%;width:4px;background:var(--gold);z-index:2;transform:translateX(-50%)}
.ba-divider::after{content:'⟷';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:40px;height:40px;background:var(--gold);color:var(--navy);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:1rem;font-weight:700;box-shadow:0 2px 12px rgba(0,0,0,.3)}

/* ── Chat Widget ── */
.chat-bubble{position:fixed;bottom:32px;right:32px;width:56px;height:56px;border-radius:50%;background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--navy);border:none;cursor:pointer;font-size:1.5rem;display:flex;align-items:center;justify-content:center;z-index:9997;box-shadow:0 4px 20px rgba(212,168,83,.4);transition:transform .3s ease,box-shadow .3s ease}
.chat-bubble:hover{transform:scale(1.1);box-shadow:0 8px 30px rgba(212,168,83,.5)}
.chat-bubble.hidden{display:none}
.chat-panel{position:fixed;bottom:100px;right:32px;width:340px;max-height:440px;background:var(--navy-light);border:1px solid var(--glass-border);border-radius:var(--radius);overflow:hidden;z-index:9997;box-shadow:0 12px 48px rgba(0,0,0,.4);transform:scale(.8) translateY(20px);opacity:0;pointer-events:none;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;flex-direction:column}
.chat-panel.open{transform:scale(1) translateY(0);opacity:1;pointer-events:auto}
.chat-header{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--navy);padding:16px 20px;display:flex;align-items:center;justify-content:space-between}
.chat-header h4{font-size:.95rem;font-weight:700;color:var(--navy);margin:0}
.chat-header .chat-close{background:none;border:none;color:var(--navy);font-size:1.3rem;cursor:pointer;opacity:.7;transition:opacity .2s}
.chat-header .chat-close:hover{opacity:1}
.chat-messages{flex:1;padding:16px;overflow-y:auto;display:flex;flex-direction:column;gap:12px}
.chat-msg{max-width:85%;padding:10px 14px;border-radius:14px;font-size:.88rem;line-height:1.5}
.chat-msg.bot{background:var(--glass);border:1px solid var(--glass-border);align-self:flex-start;color:var(--text)}
.chat-msg.user{background:rgba(212,168,83,.15);border:1px solid rgba(212,168,83,.2);align-self:flex-end;color:var(--gold-light)}
.chat-input-area{padding:12px 16px;border-top:1px solid var(--glass-border);display:flex;gap:8px}
.chat-input-area input{flex:1;background:var(--glass);border:1px solid var(--glass-border);border-radius:50px;padding:10px 16px;color:var(--text);font-family:var(--font);font-size:.85rem;outline:none}
.chat-input-area input::placeholder{color:var(--text-muted)}
.chat-input-area button{background:var(--gold);color:var(--navy);border:none;border-radius:50%;width:36px;height:36px;cursor:pointer;font-size:1rem;display:flex;align-items:center;justify-content:center;flex-shrink:0}
.chat-powered{text-align:center;padding:6px;font-size:.65rem;color:var(--text-muted);opacity:.6}

/* Chat widget repositions back-to-top when both visible */
.has-chat .back-to-top{right:100px}

@media(max-width:768px){
  .chat-panel{right:16px;left:16px;width:auto;bottom:90px}
  .chat-bubble{bottom:24px;right:24px}
  .has-chat .back-to-top{right:84px;bottom:24px}
  .ba-side{padding:20px}
  .ba-side h3{font-size:1.1rem}
  .ba-side ul li{font-size:.8rem}
}

/* ── Active Nav Section Highlight ── */
.nav-links a.section-active{color:var(--gold)}
.nav-links a.section-active::after{width:100%}
